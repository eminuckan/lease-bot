# API
API_HOST=0.0.0.0
API_PORT=3001
API_LOG_LEVEL=info
API_BASE_URL=http://localhost:3001

# Worker
WORKER_POLL_INTERVAL_MS=15000
WORKER_QUEUE_BATCH_SIZE=20
WORKER_INGEST_BATCH_SIZE=250
WORKER_TASK=ai-triage-reply
WORKER_RUN_ONCE=0
# Optional: when a new inbound message is detected, fetch the full thread from the platform (SpareRoom supported).
WORKER_THREAD_SYNC_ON_NEW_INBOUND=1
WORKER_THREAD_SYNC_PLATFORMS=spareroom
WORKER_THREAD_SYNC_MAX_PER_CYCLE=2
# Safety: limit worker auto-replies to a lead-name allowlist (comma-separated).
# When set, inbound messages from other leads are marked processed with outcome=blocked and will never be sent/drafted.
WORKER_AUTOREPLY_ALLOW_LEAD_NAMES=Emin Uckan
# Safety: when allowlist mode is enabled, do not auto-reply to messages older than this.
# Prevents sending replies to historical messages after a fresh ingest / DB reset.
WORKER_AUTOREPLY_MAX_MESSAGE_AGE_MINUTES=60
# Bootstrap: auto-create the 5 required PlatformAccounts on API/worker startup when missing.
# Set to 0 to disable.
LEASE_BOT_BOOTSTRAP_PLATFORM_ACCOUNTS=1
# Dev bootstrap: auto-create a loginable admin user on API startup (skipped in production).
# Set to 0 to disable.
LEASE_BOT_DEV_BOOTSTRAP_ADMIN=1
LEASE_BOT_DEV_ADMIN_EMAIL=admin@leasebot.com
LEASE_BOT_DEV_ADMIN_PASSWORD=replace-with-dev-admin-password
LEASE_BOT_DEV_ADMIN_NAME=Lease Bot Admin
# Dev bootstrap: seed a test agent/unit/listing + availability for safe automation testing (skipped in production).
# Set to 0 to disable.
LEASE_BOT_DEV_BOOTSTRAP_TEST_DATA=1
LEASE_BOT_DEV_AGENT_NAME=Aleyna
LEASE_BOT_DEV_AGENT_TIMEZONE=America/New_York
LEASE_BOT_DEV_AVAILABILITY_XLSX_PATH=calendar-aleyna.xlsx
# RPA runtime: mock (default) or playwright (required for real platform automation)
LEASE_BOT_RPA_RUNTIME=mock
# RPA headless mode (default: 1). Many platforms block fully headless login.
# Set to 0 for debugging and for initial session capture validation.
# LEASE_BOT_RPA_HEADLESS=0
# Optional RPA diagnostics
LEASE_BOT_RPA_DEBUG=0
LEASE_BOT_RPA_DEBUG_DIR=.playwright/rpa-debug
# Limit how many inbox threads we scan per platform per cycle (0 = no limit; default is all).
# Useful for dev when SpareRoom has 100+ threads.
LEASE_BOT_RPA_INBOX_THREAD_LIMIT=20
# Optional: chrome channel override (example: chrome, msedge)
# LEASE_BOT_RPA_BROWSER_CHANNEL=chrome
# Optional: disable Chromium sandbox when required by the host environment
# LEASE_BOT_RPA_CHROMIUM_SANDBOX=0
# Optional: extra launch args as JSON array string
# LEASE_BOT_RPA_LAUNCH_ARGS_JSON=["--disable-dev-shm-usage"]

# AI provider
# heuristic = no external model call, gemini = Google Gemini via Vercel AI SDK
AI_DECISION_PROVIDER=heuristic
AI_GEMINI_MODEL=gemini-2.5-flash
# Required when AI_DECISION_PROVIDER=gemini
GOOGLE_GENERATIVE_AI_API_KEY=replace-with-google-generative-ai-api-key

# Web
WEB_PORT=5173
WEB_BASE_URL=http://localhost:5173
VITE_API_BASE_URL=http://localhost:3001
# Poll the API for inbox updates (ms). Set to 0 to disable.
VITE_INBOX_POLL_INTERVAL_MS=15000

# Shared
DATABASE_URL=postgres://postgres:postgres@localhost:5432/lease_bot
BETTER_AUTH_SECRET=replace-with-a-long-random-secret
BETTER_AUTH_URL=http://localhost:3001
# Comma-separated allowlist. Keep localhost entries for local web+api dev.
BETTER_AUTH_TRUSTED_ORIGINS=http://localhost:5173,http://127.0.0.1:5173

# Platform connector credential placeholders (R10)
# Use these names with credentials refs in platform accounts, for example:
# 1) Login ID + password (login id can be email or username)
# {"loginIdRef":"env:LEASEBREAK_LOGIN_ID","passwordRef":"env:LEASEBREAK_PASSWORD"}
# {"usernameRef":"env:LEASEBREAK_USERNAME","passwordRef":"env:LEASEBREAK_PASSWORD"}
# {"emailRef":"env:LEASEBREAK_USERNAME","passwordRef":"env:LEASEBREAK_PASSWORD"}
# 2) Captured browser session (Playwright storageState as JSON string OR path to auth.json)
# {"sessionRef":"env:LEASEBREAK_RPA_SESSION"}
#
# Optional: persistent browser profile (use when storageState is not enough, e.g. tokens stored in IndexedDB)
# {"userDataDirRef":"env:LEASEBREAK_RPA_PROFILE"}
SPAREROOM_LOGIN_ID=replace-with-spareroom-email-or-username
SPAREROOM_PASSWORD=replace-with-spareroom-password
ROOMIES_LOGIN_ID=replace-with-roomies-email-or-username
ROOMIES_PASSWORD=replace-with-roomies-password
LEASEBREAK_LOGIN_ID=replace-with-leasebreak-email-or-username
LEASEBREAK_PASSWORD=replace-with-leasebreak-password
RENTHOP_LOGIN_ID=replace-with-renthop-email-or-username
RENTHOP_PASSWORD=replace-with-renthop-password
FURNISHEDFINDER_LOGIN_ID=replace-with-furnishedfinder-email-or-username
FURNISHEDFINDER_PASSWORD=replace-with-furnishedfinder-password

# Optional: session-based auth (preferred when anti-bot blocks headless login).
# Value can be a JSON storageState blob, a `base64:<...>` encoded JSON blob, or a file path to a saved storageState JSON.
SPAREROOM_RPA_SESSION=replace-with-storage-state-json-or-path
ROOMIES_RPA_SESSION=replace-with-storage-state-json-or-path
LEASEBREAK_RPA_SESSION=replace-with-storage-state-json-or-path
RENTHOP_RPA_SESSION=replace-with-storage-state-json-or-path
FURNISHEDFINDER_RPA_SESSION=replace-with-storage-state-json-or-path

# Optional: persistent browser profiles (Playwright userDataDir).
# Use when storageState doesn't keep you logged in (some sites store auth in IndexedDB or other profile storage).
SPAREROOM_RPA_PROFILE=.playwright/profiles/spareroom
ROOMIES_RPA_PROFILE=.playwright/profiles/roomies
LEASEBREAK_RPA_PROFILE=.playwright/profiles/leasebreak
RENTHOP_RPA_PROFILE=.playwright/profiles/renthop
FURNISHEDFINDER_RPA_PROFILE=.playwright/profiles/furnishedfinder

# Postgres (Docker Compose)
POSTGRES_DB=lease_bot
POSTGRES_USER=postgres
POSTGRES_PASSWORD=postgres
POSTGRES_PORT=5432
ADMINER_PORT=8080
